<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/tabs.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/map.css">
    <script type="text/javascript" src="../javascripts/FirebaseInitialisation.js"></script>
    <script type="text/javascript" src="../javascripts/Client.js"></script>
    <script type="text/javascript" src="../javascripts/Block.js"></script>
    <script type="text/javascript" src="../javascripts/Message.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
    <title>Blockchain</title>

    <style>

    </style>

    <!--Consider deleting commented code below here-->

    <!--<style>-->
        <!--/* Clients position and colors on map*/-->
        <!--/* IDs */-->
        <!--#client1{top:70px; left:50%}-->
        <!--#client2{top:20px; left:20%}-->
        <!--#client3{top:40px; left:70%}-->
        <!--#client4{top:0px; left:40%}-->
        <!--#client5{top:0px; left:20%}-->

        <!--#client1 .n2{background-color: #ffa100}-->
        <!--#client1 .n2{background-color: #ffa100}-->
        <!--#client1 .n2{background-color: #ffa100}-->
        <!--#client1 .n2{background-color: #ffa100}-->
        <!--#client1 .n2{background-color: #ffa100}-->

        <!--#m1 .m_progress{width: 100%;}-->

        <!--#b1{-->
            <!--background: #00B7FF;-->
        <!--}-->
    <!--</style>-->


</head>
<body>
    <h1 id="testHeader" style="color: white">Test Header</h1>
    <div class="logo"></div>

    <!--TESTING AREA-->

    <script>

        // document.write("<style>");
        //
        // var i;
        // for(i=1; i<6; i++){
        //     var client = new User();
        //     document.write("#client"+i+"{top:"+ client.coY+"px; left:"+client.coX+"%}");
        //     document.write("\n");
        //     document.write("#client"+i+" .n2{background-color: "+ client.blockColour+"}");
        // }
        //
        // document.write("</style>");
        //
        // var chain = new Chain();
        // var date = new Date();
        // var block1 = new Block("b1",5,date, "u1", "Hello", "fdsdfs");
        // var block2 = new Block("b2",6,date, "u3", "Block 2 Message!", "ejdifen");
        // addBlock(chain, block1);
        // addBlock(chain, block2);
        //
        // alert(""+getChainBlockMessage(chain, 0));

    </script>

    <!--TESTING AREA-->

    <ul id="map">

        <!-- Pulse animation test div-->
        <!--</li><div id= 'client1' class='n'><div class='n1'><div class='n2 mining'></div></div></div></li>-->
        <!--<li><div id= "client2" class="n"><div class="n1"><div class="n2 mining"></div></div></div></li>-->
        <!--<li><div id= "client3" class="n"><div class="n1"><div class="n2 mining"></div></div></div></li>-->
        <!--<li><div id= "client4" class="n"><div class="n1"><div class="n2"></div></div></div></li>-->
        <!--<li><div id= "client5" class="n"><div class="n1"><div class="n2"></div></div></div></li>-->

    </ul>

    <div class="message tabbox">
        <input class="tabs" id="tab1" type="radio" name="tabs" checked>
        <label class="tab" for="tab1">Messages</label>

        <input class="tabs" id="tab2" type="radio" name="tabs">
        <label class="tab" for="tab2">Blocks</label>

        <input class="tabs" id="tab3" type="radio" name="tabs">
        <label class="tab" for="tab3">Clients</label>

        <input class="tabs" id="tab4" type="radio" name="tabs">
        <label class="tab" for="tab4">Mining</label>

        <section id="content1">
            <div class = "tab_contents">
                <div class="tab_header">
                    <div class="header_box">
                    <input class="m_input" id="sampleText" type="text" name="fname" placeholder="Write Message Here.." value="">
                    <button class="m_send" id="btn_Update" onclick="updateMessage()">Send</button>
                    </div>
                </div>
                <div id="m1" class="item_portion">
                    <div class = "m_leftsection">
                        <div class = "m_leftsectionupper">
                            <div class = "m_user">John</div>
                            <div class = "m_timesection">
                                <div class = "m_timetitle">Time: </div>
                                <div class = "m_time">12:58</div>
                            </div>
                        </div>
                        <div class="m_progresssection">
                            <div class="m_progressbar">
                                <div class="m_progress"></div>
                            </div>
                        </div>
                    </div>
                    <div class = "m_content">
                        Hello There!!
                    </div>
                    <div class = "m_cblock"></div>
                </div>
                <div id="m2" class="item_portion">
                    <div class = "m_leftsection">
                        <div class = "m_leftsectionupper">
                            <div class = "m_user">John</div>
                            <div class = "m_timesection">
                                <div class = "m_timetitle">Time: </div>
                                <div class = "m_time">12:58</div>
                            </div>
                        </div>
                        <div class="m_progresssection">
                            <div class="m_progressbar">
                                <div class="m_progress"></div>
                            </div>
                        </div>
                    </div>
                    <div class = "m_content">
                        Hello There!!
                    </div>
                    <div class = "m_cblock"></div>
                </div>
                <div id="m3" class="item_portion">
                    <div class = "m_leftsection">
                        <div class = "m_leftsectionupper">
                            <div class = "m_user">John</div>
                            <div class = "m_timesection">
                                <div class = "m_timetitle">Time: </div>
                                <div class = "m_time">12:58</div>
                            </div>
                        </div>
                        <div class="m_progresssection">
                            <div class="m_progressbar">
                                <div class="m_progress"></div>
                            </div>
                        </div>
                    </div>
                    <div class = "m_content">
                        Hello There!!
                    </div>
                    <div class = "m_cblock"></div>
                </div>
                <div id="m4" class="item_portion">
                    <div class = "m_leftsection">
                        <div class = "m_leftsectionupper">
                            <div class = "m_user">John</div>
                            <div class = "m_timesection">
                                <div class = "m_timetitle">Time: </div>
                                <div class = "m_time">12:58</div>
                            </div>
                        </div>
                        <div class="m_progresssection">
                            <div class="m_progressbar">
                                <div class="m_progress"></div>
                            </div>
                        </div>
                    </div>
                    <div class = "m_content">
                        Hello There!!
                    </div>
                    <div class = "m_cblock"></div>
                </div>

            </div>
            <!--
            <h1 id="msg">Successful Prototype</h1>
            <h1 id="msg_upper">UPPERCASE</h1>
            <input id="sampleText" type="text" name="fname" placeholder="Enter a message.." value="">
            <!--<button id="btn_Update" onclick="updateMessage()">Try it</button>-->
            <!--
            <input type="button" id="btn_Update" value="Try It" onclick="updateMessage();" />
            -->
        </section>

        <section id="content2">
            <div class = "tab_contents">
                <div class="tab_header">
                    <div class="header_box">
                        <div class="single_chunk" id="b_difficulty">Difficulty: 45</div>
                        <div class="single_chunk" id="b_chainlength">Chain Length: 45</div>

                        </div>
                </div>
                <div id="b1" class="item_portion">
                    <div class="b_leftsection">
                        <div class="single_chunk b_number">122</div>
                        <div class="single_chunk b_ts">12:59</div>
                        <div class="single_chunk b_ph">af45ad</div>
                    </div>
                    <div class="b_midsection">
                        <div class="single_chunk b_nonce">4562</div>
                        <div class="single_chunk b_fb">John</div>
                        <div class="single_chunk b_col">#00B7FF</div>
                    </div>
                    <div class="b_rightsection">
                        <div class="b_messagesbox">
                            <div class="b_message">
                                <div class="b_messageuser">John</div>
                                <div class="b_messagecontent">Hello There!!</div>
                                <div class="b_messagetime">12:58</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="content3">
            <div class = "tab_contents">
                <div class="tab_header">
                    <div class="header_box">
                        <button class="c_add" id="c_btn_add" onclick="addBot()">+</button>
                    </div>
                </div>
                <div id="c1" class="item_portion">
                        <div class="c_leftsection">
                            <div class="c_block"></div>
                        </div>
                        <div class="c_midsection">Me</div>
                        <div class="c_rightsection">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>

                    </div>
                <div id="c2" class="item_portion">
                        <div class="c_leftsection">
                            <div class="c_block"></div>
                        </div>
                        <div class="c_midsection">Bot1</div>
                        <div class="c_rightsection">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider round"></span>
                            </label>
                            <button class="c_remove" id="c_btn_remove" onclick="removeBot()">-</button>
                        </div>

                    </div>
            </div>
        </section>

        <section id="content4">
            <div class = "tab_contents">
                <div class="tab_header">
                    <div class="header_box">
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider round"></span>
                        </label>

                    </div>
                </div>

                    <div class="miner_statlayer1">
                        <div class="miner_statlayer_leftsection">Current Block</div>
                        <div class="miner_statlayer_midsection">Difficulty</div>
                    </div>
                    <div class="miner_statlayer2">
                        <div class="miner_statlayer_leftsection">Nonce</div>
                        <div class="miner_statlayer_midsection">Package</div>

                    </div>
                    <div class="miner_statlayer2">
                        <div class="miner_statlayer_leftsection">Hit</div>
                        <div class="miner_statlayer_midsection">Difficulty</div>

                    </div>

                <div id="a1" class="item_portion miner_attempt">
                    <div class="a_col_block">a</div>
                    <div class="a_col_hit">a</div>
                    <div class="a_col_nonce">a</div>
                    <div class="a_col_package">a</div>
                    <div class="a_col_message">a</div>
                </div>
                <div id="a2" class="item_portion miner_attempt">
                    <div class="a_col_block">a</div>
                    <div class="a_col_hit">a</div>
                    <div class="a_col_nonce">a</div>
                    <div class="a_col_package">a</div>
                    <div class="a_col_message">a</div>
                </div>
                <div id="a3" class="item_portion miner_attempt">
                    <div class="a_col_block">a</div>
                    <div class="a_col_hit">a</div>
                    <div class="a_col_nonce">a</div>
                    <div class="a_col_package">a</div>
                    <div class="a_col_message">a</div>
                </div>
            </div>
        </section>

    </div>
    <p id="load">Firebase SDK Loading&hellip;</p>

    <div class="messageSnackbar">Text updated across all devices viewing this page</div>



    <script>

        //Initialise Firebase
        firebase.initializeApp(config);
        
        Bot();
        // var bigOne = document.getElementById('bigOne');
        // var dbRef = firebase.database().ref().child('text');
        // dbRef.on('value', snap => bigOne.innerText = snap.val());


        // const usersRef = db.doc("users/JOHN1");
        // const tes = "johnika";
        // usersRef.set({
        //     name: tes
        // }).then(function () {
        //     console.log("Name Updated");
        // }).catch(function(error){
        //     console.log("Got Error: ", error);
        // });

        //update the message
        function updateMessage() {
            var text = document.getElementById('sampleText').value;
            mRef.set(text);
            document.getElementById('sampleText').value = "";
            var snackbar = document.getElementById("messageSnackbar")
            snackbar.className = "show";
            setTimeout(function(){ snackbar.className = snackbar.className.replace("show", ""); }, 3000);

        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
            // // The Firebase SDK is initialized and available here!
            //
            // firebase.auth().onAuthStateChanged(user => { });
            // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
            // firebase.messaging().requestPermission().then(() => { });
            // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
            //
            // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

            try {
                let app = firebase.app();
                let features = ['auth', 'database', 'messaging', 'storage'].filter(feature => typeof app[feature] === 'function');
                document.getElementById('load').innerHTML = `Firebase SDK loaded with ${features.join(', ')}`;
            } catch (e) {
                console.error(e);
                document.getElementById('load').innerHTML = '!!  FIREBASE BROKEN  !!';
            }
        });
    </script>


</body>
</html>